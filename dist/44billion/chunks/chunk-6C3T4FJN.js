var Wr=Object.create;var we=Object.defineProperty;var zr=Object.getOwnPropertyDescriptor;var Gr=Object.getOwnPropertyNames;var Kr=Object.getPrototypeOf,Zr=Object.prototype.hasOwnProperty;var Rt=e=>{throw TypeError(e)};var Vr=(e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var no=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),oo=(e,t)=>{for(var r in t)we(e,r,{get:t[r],enumerable:!0})},Xr=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Gr(t))!Zr.call(e,o)&&o!==r&&we(e,o,{get:()=>t[o],enumerable:!(n=zr(t,o))||n.enumerable});return e};var so=(e,t,r)=>(r=e!=null?Wr(Kr(e)):{},Xr(t||!e||!e.__esModule?we(r,"default",{value:e,enumerable:!0}):r,e));var C=(e,t,r)=>Vr(e,typeof t!="symbol"?t+"":t,r),Ge=(e,t,r)=>t.has(e)||Rt("Cannot "+r);var m=(e,t,r)=>(Ge(e,t,"read from private field"),r?r.call(e):t.get(e)),E=(e,t,r)=>t.has(e)?Rt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),K=(e,t,r,n)=>(Ge(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ce=(e,t,r)=>(Ge(e,t,"access private method"),r);var vt=(e,t,r,n)=>({set _(o){K(e,t,o,r)},get _(){return m(e,t,n)}});var It=(e,t,r,n,o)=>{let i=r.length,s=t.length,c=i,u=0,a=0,l=null;for(;u<s||a<c;)if(s===u){let p=c<i?a?n(r[a-1],-0).nextSibling:n(r[c],0):o;for(;a<c;)e.insertBefore(n(r[a++],1),p)}else if(c===a)for(;u<s;)(!l||!l.has(t[u]))&&e.removeChild(n(t[u],-1)),u++;else if(t[u]===r[a])u++,a++;else if(t[s-1]===r[c-1])s--,c--;else if(t[u]===r[c-1]&&r[a]===t[s-1]){let p=n(t[--s],-0).nextSibling;e.insertBefore(n(r[a++],1),n(t[u++],-0).nextSibling),e.insertBefore(n(r[--c],1),p),t[s]=r[c]}else{if(!l){l=new Map;let p=a;for(;p<c;)l.set(r[p],p++)}if(l.has(t[u])){let p=l.get(t[u]);if(a<p&&p<c){let f=u,d=1;for(;++f<s&&f<c&&l.get(t[f])===p+d;)d++;if(d>p-a){let h=n(t[u],0);for(;a<p;)e.insertBefore(n(r[a++],1),h)}else e.replaceChild(n(r[a++],1),n(t[u++],-1))}else u++}else e.removeChild(n(t[u++],-1))}return r};var{isArray:Ee}=Array,{getPrototypeOf:Jr,getOwnPropertyDescriptor:Qr}=Object;var Bt="http://www.w3.org/2000/svg",T=[],Se=()=>document.createRange(),$=(e,t,r)=>(e.set(t,r),r),Ot=(e,t)=>{let r;do r=Qr(e,t);while(!r&&(e=Jr(e)));return r},Dt=(e,t)=>t.reduceRight(Yr,e),Yr=(e,t)=>e.childNodes[t];var{setPrototypeOf:en}=Object,$t=e=>{function t(r){return en(r,new.target.prototype)}return t.prototype=e.prototype,t};var J,_e=(e,t,r)=>(J||(J=Se()),r?J.setStartAfter(e):J.setStartBefore(e),J.setEndAfter(t),J.deleteContents(),e);var Ke=({firstChild:e,lastChild:t},r)=>_e(e,t,r),Mt=!1,ke=(e,t)=>Mt&&e.nodeType===11?1/t<0?t?Ke(e,!0):e.lastChild:t?e.valueOf():e.firstChild:e,Nt=e=>document.createComment(e),Q,le,q,Te=class extends $t(DocumentFragment){constructor(r){super(r);E(this,Q,Nt("<>"));E(this,le,Nt("</>"));E(this,q,T);this.replaceChildren(m(this,Q),...r.childNodes,m(this,le)),Mt=!0}get firstChild(){return m(this,Q)}get lastChild(){return m(this,le)}get parentNode(){return m(this,Q).parentNode}remove(){Ke(this,!1)}replaceWith(r){Ke(this,!0).replaceWith(r)}valueOf(){let{parentNode:r}=this;if(r===this)m(this,q)===T&&K(this,q,[...this.childNodes]);else{if(r){let{firstChild:n,lastChild:o}=this;for(K(this,q,[n]);n!==o;)m(this,q).push(n=n.nextSibling)}this.replaceChildren(...m(this,q))}return this}};Q=new WeakMap,le=new WeakMap,q=new WeakMap;var Lt=(e,t,r)=>e.setAttribute(t,r),fe=(e,t)=>e.removeAttribute(t),rn=(e,t)=>{for(let r in t){let n=t[r],o=r==="role"?r:`aria-${r}`;n==null?fe(e,o):Lt(e,o,n)}return t},Ae,nn=(e,t,r)=>{r=r.slice(1),Ae||(Ae=new WeakMap);let n=Ae.get(e)||$(Ae,e,{}),o=n[r];return o&&o[0]&&e.removeEventListener(r,...o),o=Ee(t)?t:[t,!1],n[r]=o,o[0]&&e.addEventListener(r,...o),t};var j=(e,t)=>{let{t:r,n}=e,o=!1;switch(typeof t){case"object":if(t!==null){(n||r).replaceWith(e.n=t.valueOf());break}case"undefined":o=!0;default:r.data=o?"":t,n&&(e.n=null,n.replaceWith(r));break}return t},on=(e,t)=>Ve(e,t,t==null?"class":"className"),sn=(e,t)=>{let{dataset:r}=e;for(let n in t)t[n]==null?delete r[n]:r[n]=t[n];return t},Re=(e,t,r)=>e[r]=t,an=(e,t,r)=>Re(e,t,r.slice(1)),Ve=(e,t,r)=>t==null?(fe(e,r),t):Re(e,t,r),Ht=(e,t)=>(typeof t=="function"?t(e):t.current=e,t),Ze=(e,t,r)=>(t==null?fe(e,r):Lt(e,r,t),t),cn=(e,t)=>t==null?Ve(e,t,"style"):Re(e.style,t,"cssText"),un=(e,t,r)=>(e.toggleAttribute(r.slice(1),t),t),Z=(e,t,r)=>{let{length:n}=t;if(e.data=`[${n}]`,n)return It(e.parentNode,r,t,ke,e);switch(r.length){case 1:r[0].remove();case 0:break;default:_e(ke(r[0],0),ke(r.at(-1),-0),!1);break}return T},R=new Map([["aria",rn],["class",on],["data",sn],["ref",Ht],["style",cn]]),Pt=(e,t,r)=>{switch(t[0]){case".":return an;case"?":return un;case"@":return nn;default:return r||"ownerSVGElement"in e?t==="ref"?Ht:Ze:R.get(t)||(t in e?t.startsWith("on")?Re:Ot(e,t)?.set?Ve:Ze:Ze)}},Ut=(e,t)=>(e.textContent=t??"",t);var Y=(e,t,r)=>({a:e,b:t,c:r}),qt=(e,t)=>({b:e,c:t}),jt=(e,t,r,n)=>({v:T,u:e,t,n:r,c:n}),v=()=>Y(null,null,T);var Xe=e=>(t,r)=>{let{a:n,b:o,c:i}=e(t,r),s=document.importNode(n,!0),c=T;if(o!==T){c=[];for(let u,a,l=0;l<o.length;l++){let{a:p,b:f,c:d}=o[l],h=p===a?u:u=Dt(s,a=p);c[l]=jt(f,h,d,f===Z?[]:f===j?v():null)}}return qt(i?s.firstChild:new Te(s),c)};var Ft=/^(?:plaintext|script|style|textarea|title|xmp)$/i,Wt=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;var ln=/<([a-zA-Z0-9]+[a-zA-Z0-9:._-]*)([^>]*?)(\/?)>/g,fn=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,pn=/[\x01\x02]/g,zt=(e,t,r)=>{let n=0;return e.join("").trim().replace(ln,(o,i,s,c)=>`<${i}${s.replace(fn,"=$2$1").trimEnd()}${c?r||Wt.test(i)?" /":`></${i}`:""}>`).replace(pn,o=>o===""?`<!--${t+n++}-->`:t+n++)};var ve=document.createElement("template"),Je,Qe,Gt=(e,t)=>{if(t)return Je||(Je=document.createElementNS(Bt,"svg"),Qe=Se(),Qe.selectNodeContents(Je)),Qe.createContextualFragment(e);ve.innerHTML=e;let{content:r}=ve;return ve=ve.cloneNode(!1),r};var Ye=e=>{let t=[],r;for(;r=e.parentNode;)t.push(t.indexOf.call(r.childNodes,e)),e=r;return t},Kt=()=>document.createTextNode(""),mn=(e,t,r)=>{let n=Gt(zt(e,pe,r),r),{length:o}=e,i=T;if(o>1){let u=[],a=document.createTreeWalker(n,129),l=0,p=`${pe}${l++}`;for(i=[];l<o;){let f=a.nextNode();if(f.nodeType===8){if(f.data===p){let d=Ee(t[l-1])?Z:j;d===j&&u.push(f),i.push(Y(Ye(f),d,null)),p=`${pe}${l++}`}}else{let d;for(;f.hasAttribute(p);){d||(d=Ye(f));let h=f.getAttribute(p);i.push(Y(d,Pt(f,h,r),h)),fe(f,p),p=`${pe}${l++}`}!r&&Ft.test(f.localName)&&f.textContent.trim()===`<!--${p}-->`&&(i.push(Y(d||Ye(f),Ut,null)),p=`${pe}${l++}`)}}for(l=0;l<u.length;l++)u[l].replaceWith(Kt())}let{childNodes:s}=n,{length:c}=s;return c<1?(c=1,n.appendChild(Kt())):c===1&&o!==1&&s[0].nodeType!==1&&(c=0),$(Zt,e,Y(n,i,c===1))},Zt=new WeakMap,pe="is\xB5",et=e=>(t,r)=>Zt.get(t)||mn(t,r,e);var gn=Xe(et(!1)),bn=Xe(et(!0)),tt=(e,{s:t,t:r,v:n})=>{if(e.a!==r){let{b:o,c:i}=(t?bn:gn)(r,n);e.a=r,e.b=o,e.c=i}for(let{c:o}=e,i=0;i<o.length;i++){let s=n[i],c=o[i];switch(c.u){case Z:c.v=Z(c.t,yn(c.c,s),c.v);break;case j:let u=s instanceof L?tt(c.c||(c.c=v()),s):(c.c=null,s);u!==c.v&&(c.v=j(c,u));break;default:s!==c.v&&(c.v=c.u(c.t,s,c.n,c.v));break}}return e.b},yn=(e,t)=>{let r=0,{length:n}=t;for(n<e.length&&e.splice(n);r<n;r++){let o=t[r];o instanceof L?t[r]=tt(e[r]||(e[r]=v()),o):e[r]=null}return t},L=class{constructor(t,r,n){this.s=t,this.t=r,this.v=n}toDOM(t=v()){return tt(t,this)}};var Vt=new WeakMap,rt=(e,t)=>{let r=Vt.get(e)||$(Vt,e,v()),{b:n}=r;return n!==(typeof t=="function"?t():t).toDOM(r)&&e.replaceChildren(r.b.valueOf()),e};var Xt=e=>(t,...r)=>new L(e,t,r),nt=Xt(!1),ot=Xt(!0);var Jt=new WeakMap,Qt=e=>(t,r)=>{function n(i,...s){return new L(e,i,s).toDOM(this)}let o=Jt.get(t)||$(Jt,t,new Map);return o.get(r)||$(o,r,n.bind(v()))},Yt=Qt(!1),er=Qt(!0);var b=[];function Ie(e,t){if(t===void 0||!e)throw new Error("Missing arg on registerCurrentObserverToLocalSet");if(!t)return;let r=t===!0?b[b.length-1]:t;r&&r.kind!=="offSwitch"&&e.add(r)}var de=new Set;function Be(e){let t=[];e.forEach(r=>{r.kind==="computed"&&de.has(r)||(e.delete(r),t.push(r.trigger))}),t.forEach(xn)}function xn(e){e()}var x=Symbol("_f_eq");function wn(e){let t={},r=e.split(";").map(o=>o.trim()).filter(o=>o),n=/^[-+]?(\d+\.?\d*|\.\d+)([eE][-+]?\d+)?$/;for(let o of r){let i=o.indexOf(":");if(i===-1)continue;let s=o.slice(0,i).trim(),c=o.slice(i+1).trim(),u=s;s.startsWith("--")||(u=s.replace(/-([a-z])/g,(l,p)=>p.toUpperCase()));let a=c;n.test(c)&&(a=parseFloat(c)),t[u]=a}return t}function st(e){return Array.isArray(e)?e.reduce((t,r)=>(r&&(r=st(r),Object.entries(r).forEach(([n,o])=>{t[n]=o})),t),{}):typeof e=="string"?wn(e??""):e}function H(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function Oe(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function De(e){return e.replace(/-([\w\d])/g,(t,r)=>r?r.toUpperCase():"")}function tr(e){return e.replace(new RegExp("(?<=[a-z])(?=[A-Z])|(?<=[A-Z])(?=[A-Z][a-z])|(?<=[a-zA-Z])(?=\\d)|(?<=\\d)(?=[a-zA-Z])","g"),"-").toLowerCase()}function _(e){return Array.isArray(e)?e.length:0}function k(e,t,r=(()=>{throw new Error("Missing previous length")})(),n=_(t),o,i=t?.[x]){return Object.is(e,t)&&r===n&&(i===void 0||Object.is(o,i))}function it(e,t){return typeof e=="function"?e(t,x):e instanceof Event&&typeof e.target.value=="string"?e.target.type==="number"?e.target.step.includes(".")?parseFloat(e.target.value):parseInt(e.target.value):e.target.value:e}var $e=(e=>()=>e??=Object.entries(Object.getOwnPropertyDescriptors(function(){})).reduce((t,[r,n])=>(n.configurable||t.push(r),t),[]))();function rr(e){return Object.assign({},e)}var at=class extends Set{add(t){return this.last=t,super.add(t)}delete(t){return this.last===t&&delete this.last,super.delete(t)}},w={previousComponentSet:new at,components:{}};function nr(e){try{return JSON.parse(e)}catch{return e}}function or(e){return JSON.stringify(e)}function ct(e){if(e===void 0)return!1;let t=nr(or({val:e})).val,r;return H(e)===H(t)&&((r=Array.isArray(e))&&e.every(ct)||!r&&["object","function"].includes(typeof e)||Object.is(e,t))}function Ne(e,t){w.components[e]?.cleanupFns?.add?.(t)}function Me(e,t){w.components[e]?.cleanupFns?.delete?.(t)}function sr(e){for(let t of w.components[e]?.cleanupFns?.values?.()||[])t()}function ut(e,t){w.components[e]?.afterRenderFns?.add?.(t)}function ir(e){for(let t of w.components[e]?.afterRenderFns?.values?.()||[])t();w.components[e]?.afterRenderFns?.clear?.()}function ar(e){if(!globalThis._F_SHOULD_RESTORE_STATE_ON_TAB_RELOAD)return;let t,r,n,o;for(t=window.sessionStorage.length-1;t>=0;t--)r=window.sessionStorage.key(t),[n,o]=r.split(":"),!(n!=="_f_hooks"||o!==e)&&window.sessionStorage.removeItem(r)}function F(e,t,r,n=null){!globalThis._F_SHOULD_RESTORE_STATE_ON_TAB_RELOAD||!ct(n)||window.sessionStorage.setItem(`_f_hooks:${e}:${t}:${r}`,or(n))}function I(){return w.currentComponent}function S(){return w.components[I().stableId]??={key:I().stableId,isDirty:!1,currentIndex:0,hookStates:[],get cleanupFns(){return delete this.cleanupFns&&(this.cleanupFns=new Set)},get afterRenderFns(){return delete this.afterRenderFns&&(this.afterRenderFns=new Set)}}}function he(e,t=!globalThis._F_SHOULD_RESTORE_STATE_ON_TAB_RELOAD){if(t)return;let r,n;return Object.entries(e).reduce((o,[i,s])=>((n=s?._f_isSignal||s?._f_isComputed)?s=rr(s):!(r=i.endsWith("$"))&&!n&&Oe(s)&&(s=he(s)),o[i]=s,o),{})}function V(e,t,r=!globalThis._F_SHOULD_RESTORE_STATE_ON_TAB_RELOAD){if(r)return{value:t(),isFreshValue:!0};let{key:n,currentIndex:o}=S(),i=`_f_hooks:${n}:${o}:${e}`;if(!(i in window.sessionStorage))return{value:t(),isFreshValue:!0};let s=nr(window.sessionStorage.getItem(i));if(H(s)!=="object")return{value:s,isFreshValue:!1};let c=t();return function(){let a=[[s,c]],l=!1;for(;a.length>0;){let[p,f]=a.pop();if(H(f)!=="object"&&!f?._f_isSignal&&!f?._f_isComputed)return{value:c,isFreshValue:!0};if(Object.keys(p).every(h=>!(h in f)))return{value:c,isFreshValue:!0};Object.entries(p).forEach(([h,g])=>{H(g)==="object"&&a.push([g,f[h]])});let d={};for(let[h,g]of Object.entries(f))if(!(h in p)){if(ct(g))return{value:c,isFreshValue:!0};d[h]=!0}Object.entries(p).filter(([h])=>!d[h]&&H(f[h])!=="object"&&!f[h]?._f_isSignal&&!f[h]?._f_isComputed).forEach(([h,g])=>{l??=!0,f[h]=g})}return{value:c,isFreshValue:!l}}()}var lt=new WeakMap;(function(){function t(a){return lt.has(a.mountedNodeReference)||lt.set(a.mountedNodeReference,new Map),lt.get(a.mountedNodeReference)}function r(a,l,p){let f=t(p),d;for(d in a)d in l||f.delete(d);for(d in l)f.set(d,{length:_(l[d]),eq:l[d]?.[x]})}function n(a,l,p){let f;for(f in a)if(!(f in l))return!0;let d=t(p);for(f in l)if(!k(a[f],l[f],d.get(f)?.length??-1,void 0,d.get(f)?.[x]))return!0;return!1}function o(a,l,p){return a._f_isComponent?!1:(a.setAttribute(p,l),!0)}R.set("props",(a,l,p,f)=>{if(o(a,l,p))return l;if(f||={},l||={},H(l)!=="object")throw new Error("Component props should be an object literal");return n(f,l,a)&&(a.props=l,a._f_isComponent&&a.isMounted&&a.scheduleRender()),r(f,l,a),l});let i=R.get("style");R.set("style",(a,l,p,f)=>{if(typeof l!="object"||l===null)return i(a,l,p,f),l;let d={...st(l)};for(let h in f)h in d||(d[h]="");for(let h in d)d[h]==null&&(d[h]=""),a.style[h]=d[h];return a.getAttribute("style")===""&&a.removeAttribute("style"),l});let s=R.get("class");function c(a){return Object.entries(a).filter(([,l])=>!!l).map(([l])=>l).join(" ").trim()}function u(a,l,p,f){return Array.isArray(l)?l=l.flat(1/0).map(d=>typeof d=="object"?c(d):d).filter(Boolean).join(" "):typeof l=="object"&&(l=c(l)),s(a,l,p,f),l}R.set("class",u),R.set("className",u),R.set("ref",(a,l)=>{if("set"in l)l.set(a);else if("current"in l)l.current=a;else if(typeof l=="function")l(a);else throw new Error("Unknown ref");return l})})();function Ms(e,t){let r=typeof e,n;if(r==="string")n={tagName:e};else if(r==="object")n=e;else if(r==="function")n=t??{},t=e;else throw new Error("Wrong function signature");let{tagName:o=t.name,useShadowDOM:i,useShadowDom:s=i??!1,shadowRootOptions:c={mode:"open"},enableCascadingStyles:u=!0,classProps:a,instanceProps:l,constructor:p}=n;if(o=o.includes("-")?o.toLowerCase():tr(o),!o)throw new Error("Need component tag name");let f=class extends cr(n.as){constructor(){super({useShadowDom:s,shadowRootOptions:c,enableCascadingStyles:u}),p?.call(this)}};a&&Object.assign(f,a),l&&Object.assign(f.prototype,l);let d,h,g;f.prototype.component=function(){return d??=this.html.bind(this),h??=this.svg.bind(this),g??={html:d,h:d,svg:h,s:h,it:this,matches:Le.matches.bind(Le)},g.props=this.props,t.call(this,g)},customElements.define(o,f)}var En;function Sn(){return En??=Array.from(document.styleSheets).map(e=>{let t=new CSSStyleSheet,r=Array.from(e.cssRules).map(n=>n.cssText).join(" ");return t.replaceSync(r),t})}function _n(e){e.adoptedStyleSheets.push(...Sn())}var ft={},Le=cr();function cr(e){var r,n,o;if(e in ft)return ft[e];let t;try{t=e?document.createElement(e).constructor:window.HTMLElement}catch(i){console.log(i.stack),t=window.HTMLUnknownElement}return ft[e]=(r=class extends t{constructor({useShadowDOM:s,useShadowDom:c=s??!1,shadowRootOptions:u={mode:"open"},enableCascadingStyles:a=!0}={}){super();C(this,"_f_isComponent",!0);C(this,"mountedNodeReference",{});C(this,"state",{});C(this,"props",{});C(this,"attrs",{});C(this,"renderCall");C(this,"parentComponent",null);C(this,"renderRecallsDueToIsDirty",0);C(this,"maxPostponedRenderCallsDueToIsDirty",3);C(this,"componentBodyTrigger",()=>this.isMounted&&this.scheduleRender());E(this,o,null);C(this,"domUpdateRequest",null);C(this,"componentHtml",null);C(this,"h",this.html);C(this,"s",this.svg);this.enableCascadingStyles=a,(this.useShadowDom=c)&&(this.attachShadow(u),a&&_n(this.shadowRoot)),super.constructor===window.HTMLElement&&(this.style.display="contents")}static matches(s,c){return s.matches||(s=s.parentElement),s.matches(c)?s:s.closest(c)}connectedCallback(){this.isMounted?(cancelIdleCallback(this.unmountIdleCallback),this.parentComponent=w.previousComponentSet.last):(this.parentComponent=w.previousComponentSet.last,this.constructor.observedAttributes.forEach(s=>{this.updateAttr(s,this.getAttribute(s))}),window.requestIdleCallback(()=>window.requestIdleCallback(()=>{Promise.resolve(this.onMount?.()).then(()=>{this.setSignalObserver(),this.render()})})),this.isMounted=!0)}disconnectedCallback(){let s=this.mountedNodeReference;this.unmountIdleCallback=window.requestIdleCallback(()=>window.requestIdleCallback(()=>{delete this.unmountIdleCallback,this.isAsyncUnmounting=!0,Promise.resolve(this.onUnmount?.()).then(()=>{sr(),this.renderCall&&window.cancelIdleCallback(this.renderCall),s===this.mountedNodeReference&&(this.mountedNodeReference={}),this.renderRecallsDueToIsDirty=0,delete this.renderCall,delete this.domUpdateRequest,delete this.componentHtml,delete this.parentComponent,delete w.components[this.stableId],ar(this.stableId),this.deleteSignalObserver(),this.isMounted=!1})}))}attributeChangedCallback(s,c,u){this.updateAttr(s,u),this.scheduleRender()}static generateId(){return vt(this,n)._++}get stableId(){return Object.defineProperty(this,"stableId",{value:this.id||Le.generateId(),writable:!1,configurable:!0}).stableId}updateAttr(s,c){s!=="props"&&(this.attrs[De(s)]=c)}handleEvent(s){(this[`on${s.type[0].toUpperCase()+s.type.slice(1)}`]??this[`on${(s.type.split(":")[1]??"")[0].toUpperCase()+(s.type.split(":")[1]??"")[1].slice(1)}`])?.(s,{matches:Le.matches})}get tagName(){return window.customElements.getName(this.constructor)}addElementEventListener(s,c=De(this.tagName)){this.addEventListener([c,s].filter(Boolean).join(":"),this)}dispatchElementEvent(s,c={}){let u=De(this.tagName),a=new CustomEvent(`${u}:${s}`,{bubbles:!0,cancelable:!0,...c});return this.dispatchEvent(a)}scheduleRender(){if(this.renderCall&&window.cancelIdleCallback(this.renderCall),!this.isMounted){console.log("Tried to schedule rendering of an unmounted node");return}let s=this.renderCall=window.requestIdleCallback(()=>{this.isMounted&&s===this.renderCall&&(delete this.renderCall,this.render())},{timeout:2e3})}beforeRenderAttempt(){this.renderCall&&window.cancelIdleCallback(this.renderCall),w.currentComponent=this}_beforeRender(){w.previousComponentSet.add(this),this?.beforeRender?.()}setSignalObserver(){K(this,o,{kind:"componentBody",trigger:this.componentBodyTrigger})}deleteSignalObserver(){K(this,o,null)}getSignalObserver(){return m(this,o)}render(){if(this.isMounted){if(this.beforeRenderAttempt(),b.push(this.getSignalObserver()),this.componentHtml=this.component()??this.html``,b.pop(),S().currentIndex=0,this.renderRecallsDueToIsDirty>=Math.max(0,this.maxPostponedRenderCallsDueToIsDirty)&&S().isDirty&&(S().isDirty=!1),S().isDirty){S().isDirty=!1,this.renderRecallsDueToIsDirty++;return}this.renderRecallsDueToIsDirty=0,!this.domUpdateRequest&&(this.domUpdateRequest=window.requestAnimationFrame(()=>{this.isMounted&&(this._beforeRender(),rt(this.useShadowDom?this.shadowRoot:this,this.componentHtml),this._afterRender(),delete this.domUpdateRequest,delete this.componentHtml)}))}}_afterRender(){ir(this.stableId),w.previousComponentSet.delete(this),"currentComponent"in w&&delete w.currentComponent,this?.afterRender?.()}html(...s){return this.renderRecallsDueToIsDirty<Math.max(0,this.maxPostponedRenderCallsDueToIsDirty)&&S().isDirty?s[0]?.key!==void 0?()=>{}:void 0:s[0]?.key!==void 0?Yt(this.mountedNodeReference,s[0].key):nt(...s)}svg(...s){return this.renderRecallsDueToIsDirty<Math.max(0,this.maxPostponedRenderCallsDueToIsDirty)&&S().isDirty?s[0]?.key!==void 0?()=>{}:void 0:s[0]?.key!==void 0?er(this.mountedNodeReference,s[0].key):ot(...s)}component(){return this.html`${this.useShadowDom?"<slot></slot>":this.innerHTML}`}},n=new WeakMap,o=new WeakMap,C(r,"observedAttributes",[]),E(r,n,0),r)}var Tn=(()=>{function e(o,i){let{value:s,isFreshValue:c}=V("memo",o);return c&&i(he(s)),{memo:s}}function t(o,i){let{key:s,currentIndex:c}=o;F(s,c,"memo",i)}function r(o,i,s){i.memo=o(),t(s,i.memo)}function n(o,i){return()=>{b.push({kind:"offSwitch"});let s=o(i);return b.pop(),s}}return function(i,s={shouldCache:!1},c){let u;Array.isArray(s)?u=c?.shouldCache??!1:(u=s?.shouldCache??!1,s=[]);let a=S(),l=!a.hookStates[a.currentIndex],{key:p,currentIndex:f}=a;function d(D){u&&F(p,f,"memo",D)}let h=a.hookStates[a.currentIndex]??=e(n(i,d),d),{prevDeps:g,prevDepsLengths:O,prevDepsEqs:A}=h;return h.prevDeps=s,h.prevDepsLengths=s.map(_),h.prevDepsEqs=s.map(D=>D?.[x]),!l&&g.some((D,M)=>!k(D,h.prevDeps[M],O[M],h.prevDepsLengths[M],A,h.prevDepsEqs[M]))&&r(n(i,d),h,a),a.currentIndex++,h.memo}})(),y=Tn;var P,W,ee,He,ur,me=class{constructor(t=[]){E(this,He);E(this,P,new Set);E(this,W,new WeakMap);E(this,ee,new FinalizationRegistry(Ce(this,He,ur).bind(this)));for(let r of t)this.add(r)}add(t){if(this.has(t))return this;let r=new WeakRef(t);return m(this,W).set(t,r),m(this,P).add(r),m(this,ee).register(t,r,r),this}has(t){return m(this,W).has(t)}delete(t){let r=m(this,W).get(t);return r?(m(this,ee).unregister(r),m(this,W).delete(t),m(this,P).delete(r),!0):!1}clear(){let t;for(let r of m(this,P).values())(t=r.deref())&&(m(this,ee).unregister(r),m(this,W).delete(t));m(this,P).clear()}*[Symbol.iterator](){let t;for(let r of m(this,P).values())(t=r.deref())&&(yield t)}forEach(t){for(let r of this)t(r)}get size(){let t=0;for(let r of this)t++;return t}*entries(){for(let t of this)yield[t,t]}values(){return this[Symbol.iterator]()}*keys(){yield*this.values()}get[Symbol.toStringTag](){return"IterableWeakSet"}};P=new WeakMap,W=new WeakMap,ee=new WeakMap,He=new WeakSet,ur=function(t){m(this,P).delete(t)};var pt=new WeakMap;function X(e){return pt.has(e)||pt.set(e,new me),pt.get(e)}var dt=new WeakMap;function Pe(e){if(!dt.has(e)){let t={isCacheValid:!1,invalidateCache(){this.isCacheValid=!1}};dt.set(e,t)}return dt.get(e)}function B(e,{shouldCache:t=!0}={}){return y(r=>ge(e,r),[],{shouldCache:t})}function kn(e,t={}){return ge(e,t.persist??(()=>{}),t.thisArg??t.it)}function ge(e,t,r){let n=typeof e=="function"?e():e,o={_f_isSignal:!0,_value:n,_length:_(n),_equality:n?.[x],get(i=!0){return Ie(X(o),i),o._value},set(i,s=!0){let c=this.get(!1),u=this._length,a=this._equality;return this._value=it(r!==void 0&&typeof i=="function"?i.bind(r):i,c),this._length=_(this._value),this._equality=this._value?.[x],k(c,this._value,u??-1,this._length,a,this._equality)||(s&&Be(X(o)),t(this)),this._value}};return o.set=o.set.bind(o),An(o)}function An(e){let t={apply(r,n,o){return o.length===0?e.get():e.set(...o)},get(r,n,o){return Reflect.get(e,n,o)},set:function(r,n,o){return e[n]=o,!0},has(r,n){return n in e},ownKeys(){return[...new Set([...Object.getOwnPropertyNames(e),...$e()])]},getOwnPropertyDescriptor(r,n){return Object.getOwnPropertyDescriptor(e,n)||Object.getOwnPropertyDescriptor(function(){},n)}};return new Proxy(function(){},t)}function lr(e,{shouldCache:t=!1}={}){return y(r=>ht(e,r),[],{shouldCache:t})}function ht(e,t,r){if(typeof e!="function")throw new Error("Computed must be set to a function");r!==void 0&&(e=e.bind(r));let n,o={kind:"computed",trigger:()=>{Pe(n).invalidateCache(),X(n).size?s():n._value=void 0}},i=()=>{};function s(u=i){if(de.has(o))throw new Error("A computed can't call ownself");de.add(o),b.push(o);let a=(({_value:l,_length:p,_equality:f}={})=>({_value:l,_length:p,_equality:f}))(n);return n._value=e(),n._length=_(n._value),n._equality=n._value?.[x],Pe(n).isCacheValid=!0,k(a._value,n._value,a._length??-1,n._length,a._equality,n._equality)||(Be(X(n)),t(n)),b.pop(),de.delete(o),u(),n._value}function c(u){return()=>{Ie(X(n),u)}}return Rn(n={_value:void 0,_f_isComputed:!0,get(u=!0){return Pe(n).isCacheValid?(c(u)(),n._value):s(c(u))}})}function Rn(e){let t={apply(r,n,o){return e.get()},get(r,n,o){return Reflect.get(e,n,o)},set:function(r,n,o){return e[n]=o,!0},has(r,n){return n in e},ownKeys(){return[...new Set([...Object.getOwnPropertyNames(e),...$e()])]},getOwnPropertyDescriptor(r,n){return Object.getOwnPropertyDescriptor(e,n)||Object.getOwnPropertyDescriptor(function(){},n)}};return new Proxy(function(){},t)}var z,te,Ue,fr,N=class{constructor(){E(this,Ue);E(this,z,new Map);E(this,te,new FinalizationRegistry(Ce(this,Ue,fr).bind(this)))}set(t,r){if(this.get(t)===r)return this;let n=new WeakRef(r);return m(this,te).unregister(n),m(this,z).set(t,n),m(this,te).register(r,t,n),this}get(t){return m(this,z).get(t)?.deref?.()}delete(t){let r=m(this,z).get(t);return r?(m(this,te).unregister(r),m(this,z).delete(t),!0):!1}has(t){return this.get(t)!==void 0}get[Symbol.toStringTag](){return"WeakValueMap"}};z=new WeakMap,te=new WeakMap,Ue=new WeakSet,fr=function(t){m(this,z).delete(t)};function re(e,{shouldCache:t=!0,isStatic:r=!0}={}){return y(n=>pr(typeof e=="function"?(o=>(b.push({kind:"offSwitch"}),o=e(),b.pop(),o))():e,{isStatic:r},n,!0),[],{shouldCache:t})}function mt(e,t,r=!globalThis._F_SHOULD_RESTORE_STATE_ON_TAB_RELOAD){if(r)return;let n=he(t);e(n)}var U=new WeakMap;function pr(e,t={isStatic:!0},r=()=>{},n=!0,o=e){let i={deleteProperty(c,u){let a=u.endsWith("$");return t.isStatic&&a?(console.error("Can't initialize/change/delete a signal variable after useStore's first call to keep their references at downstream components. Use <signalExample>$.set(undefined) instead of delete signalExample$"),!1):(delete c[u],!0)},set(c,u,a,l){let p=u.endsWith("$"),f=a?._f_isSignal||a?._f_isComputed;if(!f&&Oe(a)&&(a=pr(a,t,r,n,o),f=a?._f_isSignal||a?._f_isComputed),t.isStatic&&!n&&p)return console.error("Can't initialize/change/delete a signal variable after useStore's first call to keep their references at downstream components. Use <signalExample>$.set(...) instead of signalExample$ = ... if a signal"),!1;if(p){if(a?._f_isCallback||a?._f_isUntrackedCallback)throw new Error("Callback can't end with $");if(a?._f_isSignal||a?._f_isComputed)c[u]=a;else if(typeof a=="function")switch(a.strategy){case"signal":c[u]=ge(a,()=>mt(r,U.get(o)),U.get(o));break;case"computed":default:c[u]=ht(a,()=>mt(r,U.get(o)),U.get(o))}else c[u]=ge(a,()=>mt(r,U.get(o)),U.get(o))}else{if(f)throw new Error("Signal/computed must end with $");typeof a=="function"&&!a._f_isCallback&&!a._f_isUntrackedCallback&&(a=a.bind(U.get(o))),c[u]=a,r(U.get(o))}return!0}},s=new Proxy({_f_isStore:!0},i);e===o&&U.set(o,s);for(let[c,u]of Object.entries(e))s[c]=u;return n&&e===o&&(n=!1),s}function vn(e,t,r){let n=re(t,r),o=Bn(I());return o.get(e)??(o.set(e,n)&&n)}function ne(e,t,r){if(t)return vn(e,t,r);let{parentComponent:n}=I(),o;for(;!o&&n;)o=In(n)?.get?.(e),n=n.parentComponent;if(!o)throw new Error(`No ancestor called useClosestStore("${e}", objOrFn)`);return o}var qe=new WeakMap;function In(e){return qe.get(e.mountedNodeReference)}function Bn(e){return qe.has(e.mountedNodeReference)||qe.set(e.mountedNodeReference,new N),qe.get(e.mountedNodeReference)}function je(e,t){let r=B();return r.set(()=>e),y(()=>{let o={get(i,s,c){return s==="set"?function(...u){return i.set(()=>t(...u).state)}:Reflect.get(i,s,c)},apply(i,s,c){return c.length?i.set(()=>t(...c).state):i.get()}};return new Proxy(r,o)},[],{shouldCache:!1})}function oe(e,t={shouldCache:!1}){return y(()=>(e._f_isCallback||(e._f_isCallback=!0),e),t)}var ea=new N;function mr({from$:e,from:t=e.get(!1),render:r,...n}={}){let o=y(()=>Array.isArray(t)?t.map(s=>Array.isArray(s)?[s,[n[s[0]],n[s[1]]]]:[[s],[n[s]]]):Object.entries(t).map(([s,c])=>[[s],Array.isArray(c)?c:[c]]),Array.isArray(t)?t.map(s=>n[Array.isArray(s)?s[0]:s]):Object.values(t).map(s=>Array.isArray(s)?s[0]:s)),i=o.map(([,s])=>je(...s));return y(()=>o.reduce((s,[c],u)=>(c[0].endsWith("$")||(c.forEach(a=>delete s[a]),s[`${c[0]}$`]=i[u]),s),n),[Object.keys(n).join(":")])}var gt=new N;function se(e,t,r){let n=y(()=>!gt.has(e),[]),o;return n&&(o=re(t,r)),gt.get(e)??(gt.set(e,o)&&o)}function gr(e,t,r){return se(e,()=>({$:[()=>typeof t=="function"?t():t].map(n=>(n.strategy="signal")&&n)[0]}),r).$}function br(e,t,r){if(typeof t!="function")throw new Error("Computed must be set to a function");return se(e,{$:t},r).$}function yr(...e){if(e.length<2)return ne(e[0]).$;let[t,r,n]=e;return ne(t,()=>({$:[()=>typeof r=="function"?r():r].map(o=>(o.strategy="signal")&&o)[0]}),n).$}function yt(e,t,r,n,o,i,s){if(!r.isMounted)return;t.signalObserver??=(()=>{function a(){yt(e,t,r,n,o,i,!1)}return{kind:"task",trigger:a}})();function c(a){b.push(t.signalObserver);let l=a();return b.pop(),l}let u=(a=>function(p){if(!r.isMounted){p();return}if(a){a.fnsFromOtherCalls.push(p);return}t.prevCleanup=a=function(){p(),a.fnsFromOtherCalls.forEach(d=>d())},a.fnsFromOtherCalls=[],o(r.stableId,t.prevCleanup)})();if(n(r.stableId,t.prevCleanup),t.prevCleanup?.(),b.push({kind:"offSwitch"}),Promise.try)Promise.try(e,{track:c,cleanup:u,isHotStart:s}).then(()=>{!t.hadRun&&i()}).catch(()=>{t.hadRun&&i(!1)});else try{let a=e({track:c,cleanup:u,isHotStart:s});a.then&&a.catch?a.then(()=>{!t.hadRun&&i()}).catch(()=>{t.hadRun&&i(!1)}):t.hadRun||i()}catch(a){throw t.hadRun&&i(!1),a}b.pop()}var bt={root:null,rootMargin:"50%",threshold:0};function On(){let{value:e}=V("hadRun",()=>!1);return{hadRun:e,prevCleanup:()=>{}}}function xr(e,t,{getCurrentComponent:r,getCurrentComponentHooksConfig:n,registerHookCleanupFunction:o,unregisterHookCleanupFunction:i}){let s=n(),c=!s.hookStates[s.currentIndex],u=s.hookStates[s.currentIndex]??=On();if(c){let O=function(){switch(p){case"rendering":case"render":return ut(a.stableId,()=>yt(e,u,a,i,o,g,f));case"insertion":case"insert":default:return yt(e,u,a,i,o,g,f)}},a=r(),{when:l="init",after:p="insertion"}=t,f=u.hadRun,{key:d,currentIndex:h}=s,g=(A=!0)=>F(d,h,"hadRun",u.hadRun=A);switch(l){case"visible":{let qr=function(jr){jr.every(Fr=>!Fr.isIntersecting)||(Ur.unobserve(Pr),O())},{root:A=bt.root,rootMargin:D=bt.rootMargin,threshold:M=bt.threshold}=t,Pr=a.useShadowDom?a.shadowRoot:a,Ur=new IntersectionObserver(qr,{root:A,rootMargin:D,threshold:M});break}case"init":case"initialized":default:O()}}s.currentIndex++}function Dn(e,t,r){let n=B([],{shouldCache:!1}),o=B(!1,{shouldCache:!1}),i=B(!1,{shouldCache:!1});xr(s=>{if(s.track(()=>{i.get()}),(t.queueSize??1)>=1&&o.get()){n.set(u=>(u.push(()=>e(s)),(t.queueSize??1)<u.length&&u.shift(),u));return}let c=n.get().length===0?()=>e(s):n.set(u=>(u.shift(),u));o.set(!0),Promise.resolve(c()).then(()=>{o.set(!1),n.get().length>0&&i.set(u=>!u)})},t,r)}function xt(e){return function(t,r={}){switch(r.execution??r.exec){case"serial":return Dn(t,r,e);case"concurrent":default:return xr(t,r,e)}}}var wr=Symbol("awaitCanary");function Cr(e,t,r){let n;(n=typeof t=="function")?r??={}:(r=t??={},t=e,e=void 0),r.shouldCache??=!0;let o=B({status:"pending",hasValue:n,isLoading:!1,error:null},{shouldCache:r.shouldCache}),i=y(()=>o.get(!1).status!=="resolved",[],{shouldCache:!1}),s=B(e,{shouldCache:r.shouldCache});s.promise$??=o;let c=oe(async(...u)=>{try{if(o.set(a=>({status:"pending",hasValue:a.hasValue||!1,isLoading:!0,error:null})),u[0].isHotStart&&r.shouldCache&&!i){let a;await Promise.race([Promise.resolve().then(()=>wr),a=t(...u)])===wr&&s.set(await a)}else s.set(await t(...u));o.set({status:"resolved",hasValue:!0,isLoading:!1,error:null})}catch(a){o.set(l=>({status:"rejected",hasValue:l.hasValue||!1,isLoading:!1,error:a}))}});return Er(c,r),s}var Er=xt({getCurrentComponent:I,getCurrentComponentHooksConfig:S,registerHookCleanupFunction:Ne,unregisterHookCleanupFunction:Me});function ie(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function G(e){if(e.length%2!==0)throw new Error("invalid hex: odd length");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,o=e.slice(n,n+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("invalid hex");t[r]=i}return t}var ce="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",wt=BigInt(ce.length),ae=ce[0],$n=new Map([...ce].map((e,t)=>[e,BigInt(t)]));function Fe(e,t=0){if(e.length===0)return"".padStart(t,ae);let r=0n;for(let o of e)r=(r<<8n)+BigInt(o);let n="";if(r===0n)return ae.padStart(t,ae);for(;r>0n;){let o=r%wt;n=ce[Number(o)]+n,r=r/wt}for(let o of e){if(o!==0)break;n=ae+n}return n.padStart(t,ae)}function Sr(e,t=0){return Fe(G(e),t)}function be(e){if(typeof e!="string")throw new Error(`base62ToBytes requires a string argument but got ${typeof e}`);if(e.length===0)return new Uint8Array;let t=0;for(let i=0;i<e.length&&e[i]===ae;i++)t++;let r=0n;for(let i of e){let s=$n.get(i);if(s===void 0)throw new Error(`Invalid character in Base62 string: ${i}`);r=r*wt+s}let n=[];for(;r>0n;)n.unshift(Number(r&0xffn)),r=r>>8n;let o=new Uint8Array(t+n.length);return o.set(n,t),o}function Ct(e){return ie(be(e))}var Et="0123456789abcdefghijklmnopqrstuvwxyz",Nn=BigInt(Et.length),Mn=Et[0],Ln=new Map([...Et].map((e,t)=>[e,BigInt(t)])),Hn=/^[0-9a-z]+$/;function _r(e){return typeof e!="string"?!1:Hn.test(e)}function Tr(e,t=0){return Pn(ie(e),t)}function Pn(e,t=0){return qn(Fn(e),t)}function kr(e,t=0){return Tr(be(e),t)}function Oc(e){return jn(Un(e))}function Un(e){if(typeof e!="string")throw new Error("Input must be a string.");let t=0n;for(let r of e){let n=Ln.get(r);if(n===void 0)throw new Error(`Invalid character in Base36 string: ${r}`);t=t*Nn+n}return t}function qn(e,t){if(typeof e!="bigint")throw new Error("Input must be a BigInt.");if(e<0n)throw new Error("Can't be signed BigInt");return e.toString(36).padStart(t,Mn)}function jn(e){if(typeof e!="bigint")throw new Error("Input must be a BigInt.");if(e<0n)throw new Error("Can't be signed BigInt");let t=e.toString(16);return t.length%2!==0&&(t=`0${t}`),t}function Fn(e){if(typeof e!="string")throw new Error("Input must be a string.");return BigInt(`0x${e}`)}var Wn=7;function ue(e){return e.length>0&&e.length<=Wn&&_r(e)}function Hc(e,t){if(!t)throw new Error("Which user?");let r=[7,17,27,37,47].map(s=>t[s]).join(""),{groups:{channelEnum:n,pubkeyB62:o,dTag:i}}=e.match(/^(?<channelEnum>[abc]{1})(?<pubkeyB62>[A-Za-z0-9]{43})(?<dTag>[a-z0-9-]{1,7})$/);return`${n}${r}${kr(o)}${i}`}function Pc(e){let{groups:{channelEnum:t,pubkeyB62:r,dTag:n}}=e.match(/^(?<channelEnum>[abc]{1})(?<pubkeyB62>[A-Za-z0-9]{43})(?<dTag>[a-z0-9-]{1,7})$/);if(!ue(n))throw new Error("Invalid d tag");let o={a:"main",b:"next",c:"draft"}[t],i={main:37448,next:37449,draft:37450}[o]??37448,s=Ct(r);return{kind:i,pubkey:s,dTag:n}}function Uc(e){let{groups:{channelEnum:t,pubkeyB62:r,dTag:n}}=e.match(/^(?<channelEnum>[abc]{1})(?<pubkeyB62>[A-Za-z0-9]{43})(?<dTag>[a-z0-9-]{1,7})$/);if(!ue(n))throw new Error("Invalid d tag");if(!{a:"main",b:"next",c:"draft"}[t])throw new Error("Invalid channel");return[t,G(Ct(r)),n]}function qc(e){let t={37448:"a",37449:"b",37450:"c"}[e.kind];if(!t)throw new Error("Invalid kind");let r=Sr(e.pubkey,43);if(!ue(e.dTag))throw new Error("Invalid d tag");return`${t}${r}${e.dTag}`}function jc(e,t){let r=t.filter(o=>o[0]==="file"),n;for(let o of zn(e))if(n=r.find(i=>i[2]===o))return n;return null}function*zn(e,t=!1){let r=e[0]==="/"?e.slice(1):e,n=/\.html?$/.test(r);(n||!t&&r)&&(yield r),!n&&r.endsWith("/")&&(r=r.slice(0,-1));let o=r.replace(/(?:\/index)?\.html?$/,"");o.endsWith("/")&&(o=o.slice(0,-1));let i;o.length>0&&((i=`${o}.html`)!==r&&(yield i),(i=`${o}.htm`)!==r&&(yield i),(i=`${o}/index.html`)!==r&&(yield i),(i=`${o}/index.htm`)!==r&&(yield i)),r!=="index.html"&&(yield"index.html"),r!=="index.htm"&&(yield"index.htm")}function Ir(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Br(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(r=>typeof r=="string"):t.every(r=>Number.isSafeInteger(r)):!1}function Gn(e){if(typeof e!="function")throw new Error("function expected");return!0}function xe(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Or(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function St(e){if(!Array.isArray(e))throw new Error("array expected")}function Dr(e,t){if(!Br(!0,t))throw new Error(`${e}: array of strings expected`)}function $r(e,t){if(!Br(!1,t))throw new Error(`${e}: array of numbers expected`)}function Kn(...e){let t=i=>i,r=(i,s)=>c=>i(s(c)),n=e.map(i=>i.encode).reduceRight(r,t),o=e.map(i=>i.decode).reduce(r,t);return{encode:n,decode:o}}function Zn(e){let t=typeof e=="string"?e.split(""):e,r=t.length;Dr("alphabet",t);let n=new Map(t.map((o,i)=>[o,i]));return{encode:o=>(St(o),o.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${e}`);return t[i]})),decode:o=>(St(o),o.map(i=>{xe("alphabet.decode",i);let s=n.get(i);if(s===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${e}`);return s}))}}function Vn(e=""){return xe("join",e),{encode:t=>(Dr("join.decode",t),t.join(e)),decode:t=>(xe("join.decode",t),t.split(e))}}var Nr=(e,t)=>t===0?e:Nr(t,e%t),ze=(e,t)=>e+(t-Nr(e,t)),We=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function _t(e,t,r,n){if(St(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(ze(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${ze(t,r)}`);let o=0,i=0,s=We[t],c=We[r]-1,u=[];for(let a of e){if(Or(a),a>=s)throw new Error(`convertRadix2: invalid data word=${a} from=${t}`);if(o=o<<t|a,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)u.push((o>>i-r&c)>>>0);let l=We[i];if(l===void 0)throw new Error("invalid carry");o&=l-1}if(o=o<<r-i&c,!n&&i>=t)throw new Error("Excess padding");if(!n&&o>0)throw new Error(`Non-zero padding: ${o}`);return n&&i>0&&u.push(o>>>0),u}function Xn(e,t=!1){if(Or(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ze(8,e)>32||ze(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!Ir(r))throw new Error("radix2.encode input should be Uint8Array");return _t(Array.from(r),8,e,!t)},decode:r=>($r("radix2.decode",r),Uint8Array.from(_t(r,e,8,t)))}}function Ar(e){return Gn(e),function(...t){try{return e.apply(null,t)}catch{}}}var Tt=Kn(Zn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Vn("")),Rr=[996825010,642813549,513874426,1027748829,705979059];function ye(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<Rr.length;n++)(t>>n&1)===1&&(r^=Rr[n]);return r}function vr(e,t,r=1){let n=e.length,o=1;for(let i=0;i<n;i++){let s=e.charCodeAt(i);if(s<33||s>126)throw new Error(`Invalid prefix (${e})`);o=ye(o)^s>>5}o=ye(o);for(let i=0;i<n;i++)o=ye(o)^e.charCodeAt(i)&31;for(let i of t)o=ye(o)^i;for(let i=0;i<6;i++)o=ye(o);return o^=r,Tt.encode(_t([o%We[30]],30,5,!1))}function Jn(e){let t=e==="bech32"?1:734539939,r=Xn(5),n=r.decode,o=r.encode,i=Ar(n);function s(p,f,d=90){xe("bech32.encode prefix",p),Ir(f)&&(f=Array.from(f)),$r("bech32.encode",f);let h=p.length;if(h===0)throw new TypeError(`Invalid prefix length ${h}`);let g=h+7+f.length;if(d!==!1&&g>d)throw new TypeError(`Length ${g} exceeds limit ${d}`);let O=p.toLowerCase(),A=vr(O,f,t);return`${O}1${Tt.encode(f)}${A}`}function c(p,f=90){xe("bech32.decode input",p);let d=p.length;if(d<8||f!==!1&&d>f)throw new TypeError(`invalid string length: ${d} (${p}). Expected (8..${f})`);let h=p.toLowerCase();if(p!==h&&p!==p.toUpperCase())throw new Error("String must be lowercase or uppercase");let g=h.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');let O=h.slice(0,g),A=h.slice(g+1);if(A.length<6)throw new Error("Data must be at least 6 characters long");let D=Tt.decode(A).slice(0,-6),M=vr(O,D,t);if(!A.endsWith(M))throw new Error(`Invalid checksum in ${p}: expected "${M}"`);return{prefix:O,words:D}}let u=Ar(c);function a(p){let{prefix:f,words:d}=c(p,!1);return{prefix:f,words:d,bytes:n(d)}}function l(p,f){return s(p,o(f))}return{encode:s,decode:c,encodeFromBytes:l,decodeToBytes:a,decodeUnsafe:u,fromWords:n,fromWordsUnsafe:i,toWords:o}}var kt=Jn("bech32");var Qn=5e3,Vc=new RegExp(`^\\+{1,3}[${ce}]{48,${Qn}}$`),Mr=new TextEncoder,Lr=new TextDecoder,Hr={main:37448,next:37449,draft:37450},Yn=Object.fromEntries(Object.entries(Hr).map(([e,t])=>[t,e])),At={main:"+",next:"++",draft:"+++"},eo=Object.fromEntries(Object.entries(At).map(([e,t])=>[t,e]));function Xc(e){if(!ue(e.dTag))throw new Error("Invalid deduplication tag");let t=e.channel?At[e.channel]&&e.channel:Yn[e.kind];if(!t)throw new Error("Wrong channel");let r=to([[Mr.encode(e.dTag)],(e.relays||[]).map(i=>Mr.encode(i)),[G(e.pubkey)]]),n=Fe(r);return`${At[t]}${n}`}function Jc(e){let t=e.match(/^\+*/)[0],r=eo[t];if(!r)throw new Error("Invalid channel");let n=e.slice(t.length),o=ro(be(n));if(!o[0]?.[0])throw new Error("Missing deduplication tag");if(!o[2]?.[0])throw new Error("Missing author pubkey");if(o[2][0].length!==32)throw new Error("Author pubkey should be 32 bytes");let i=Lr.decode(o[0][0]);if(!ue(i))throw new Error("Invalid deduplication tag");return{dTag:i,pubkey:ie(o[2][0]),kind:Hr[r],channel:r,relays:o[1]?o[1].map(s=>Lr.decode(s)):[]}}function to(e){let t=[];return e.map((r,n)=>[n,r]).reverse().forEach(([r,n])=>{n.forEach(o=>{if(o.length>255)throw new Error("Value is too big");let i=new Uint8Array(o.length+2);i.set([r],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),new Uint8Array(t.reduce((r,n)=>[...r,...n]))}function ro(e){let t={},r=e,n,o,i;for(;r.length>0;){if(n=r[0],o=r[1],i=r.slice(2,2+o),r=r.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${n}`);t[n]??=[],t[n].push(i)}return t}function Qc(e){if(typeof e!="string"||!/^[0-9a-f]{64}$/i.test(e))throw new Error("Invalid pubkey hex string");let t=G(e),r=kt.toWords(t);return kt.encode("npub",r)}export{no as a,oo as b,so as c,m as d,E as e,K as f,Ce as g,Ms as h,y as i,oe as j,B as k,kn as l,je as m,mr as n,lr as o,re as p,se as q,gr as r,br as s,ne as t,yr as u,Cr as v,Er as w,ie as x,G as y,Sr as z,Ct as A,kr as B,Oc as C,ue as D,Hc as E,Pc as F,Uc as G,qc as H,jc as I,Vc as J,Xc as K,Jc as L,Qc as M};
/*! Bundled license information:

uhtml/esm/index.js:
  (*! (c) Andrea Giammarchi - MIT *)

uhtml/esm/keyed.js:
  (*! (c) Andrea Giammarchi - MIT *)

@scure/base/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
