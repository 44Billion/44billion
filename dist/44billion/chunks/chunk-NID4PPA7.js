function c(t){return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("")}function u(t){if(t.length%2!==0)throw new Error("invalid hex: odd length");let n=new Uint8Array(t.length/2);for(let e=0;e<n.length;e++){let r=e*2,o=t.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("invalid hex");n[e]=i}return n}var f="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",p=BigInt(f.length),s=f[0],w=new Map([...f].map((t,n)=>[t,BigInt(n)]));function b(t,n=0){if(t.length===0)return"".padStart(n,s);let e=0n;for(let o of t)e=(e<<8n)+BigInt(o);let r="";if(e===0n)return s.padStart(n,s);for(;e>0n;){let o=e%p;r=f[Number(o)]+r,e=e/p}for(let o of t){if(o!==0)break;r=s+r}return r.padStart(n,s)}function B(t,n=0){return b(u(t),n)}function l(t){if(typeof t!="string")throw new Error(`base62ToBytes requires a string argument but got ${typeof t}`);if(t.length===0)return new Uint8Array;let n=0;for(let i=0;i<t.length&&t[i]===s;i++)n++;let e=0n;for(let i of t){let a=w.get(i);if(a===void 0)throw new Error(`Invalid character in Base62 string: ${i}`);e=e*p+a}let r=[];for(;e>0n;)r.unshift(Number(e&0xffn)),e=e>>8n;let o=new Uint8Array(n+r.length);return o.set(r,n),o}function d(t){return c(l(t))}var h="0123456789abcdefghijklmnopqrstuvwxyz",x=BigInt(h.length),E=h[0],A=new Map([...h].map((t,n)=>[t,BigInt(n)])),I=/^[0-9a-z]+$/;function m(t){return typeof t!="string"?!1:I.test(t)}function y(t,n=0){return $(c(t),n)}function $(t,n=0){return S(v(t),n)}function T(t,n=0){return y(l(t),n)}function W(t){return z(k(t))}function k(t){if(typeof t!="string")throw new Error("Input must be a string.");let n=0n;for(let e of t){let r=A.get(e);if(r===void 0)throw new Error(`Invalid character in Base36 string: ${e}`);n=n*x+r}return n}function S(t,n){if(typeof t!="bigint")throw new Error("Input must be a BigInt.");if(t<0n)throw new Error("Can't be signed BigInt");return t.toString(36).padStart(n,E)}function z(t){if(typeof t!="bigint")throw new Error("Input must be a BigInt.");if(t<0n)throw new Error("Can't be signed BigInt");let n=t.toString(16);return n.length%2!==0&&(n=`0${n}`),n}function v(t){if(typeof t!="string")throw new Error("Input must be a string.");return BigInt(`0x${t}`)}var M={34600:!0,37348:!0,37349:!0,37350:!0,37448:!0,37449:!0,37450:!0},U=t=>!t.kinds||t.kinds.length===0||t.kinds.some(n=>M[n]),N=7;function g(t){return t.length>0&&t.length<=N&&m(t)}function q(t,n){if(!n)throw new Error("Which user?");let e=[7,17,27,37,47].map(a=>n[a]).join(""),{groups:{channelEnum:r,pubkeyB62:o,dTag:i}}=t.match(/^(?<channelEnum>[abc]{1})(?<pubkeyB62>[A-Za-z0-9]{43})(?<dTag>[a-z0-9-]{1,7})$/);return`${r}${e}${T(o)}${i}`}function F(t){let{groups:{channelEnum:n,pubkeyB62:e,dTag:r}}=t.match(/^(?<channelEnum>[abc]{1})(?<pubkeyB62>[A-Za-z0-9]{43})(?<dTag>[a-z0-9-]{1,7})$/);if(!g(r))throw new Error("Invalid d tag");let o={a:"main",b:"next",c:"draft"}[n],i={main:37448,next:37449,draft:37450}[o]??37448,a=d(e);return{kind:i,pubkey:a,dTag:r}}function X(t){let{groups:{channelEnum:n,pubkeyB62:e,dTag:r}}=t.match(/^(?<channelEnum>[abc]{1})(?<pubkeyB62>[A-Za-z0-9]{43})(?<dTag>[a-z0-9-]{1,7})$/);if(!g(r))throw new Error("Invalid d tag");if(!{a:"main",b:"next",c:"draft"}[n])throw new Error("Invalid channel");return[n,u(d(e)),r]}function K(t){let n={37448:"a",37449:"b",37450:"c"}[t.kind];if(!n)throw new Error("Invalid kind");let e=B(t.pubkey,43);if(!g(t.dTag))throw new Error("Invalid d tag");return`${n}${e}${t.dTag}`}function J(t,n){let e=n.filter(o=>o[0]==="file"),r;for(let o of P(t))if(r=e.find(i=>i[2]===o))return r;return null}function*P(t,n=!1){let e=t[0]==="/"?t.slice(1):t,r=/\.html?$/.test(e);(r||!n&&e)&&(yield e),!r&&e.endsWith("/")&&(e=e.slice(0,-1));let o=e.replace(/(?:\/index)?\.html?$/,"");o.endsWith("/")&&(o=o.slice(0,-1));let i;o.length>0&&((i=`${o}.html`)!==e&&(yield i),(i=`${o}.htm`)!==e&&(yield i),(i=`${o}/index.html`)!==e&&(yield i),(i=`${o}/index.htm`)!==e&&(yield i)),e!=="index.html"&&(yield"index.html"),e!=="index.htm"&&(yield"index.htm")}export{c as a,u as b,f as c,b as d,B as e,l as f,d as g,T as h,W as i,U as j,g as k,q as l,F as m,X as n,K as o,J as p};
